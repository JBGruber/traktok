<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="traktok">
<title>Research API • traktok</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Research API">
<meta property="og:description" content="traktok">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">traktok</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/research-api.html">Research API</a>
    <a class="dropdown-item" href="../articles/unofficial-api.html">Unofficial API</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/JBGruber/traktok/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Research API</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JBGruber/traktok/blob/HEAD/vignettes/research-api.Rmd" class="external-link"><code>vignettes/research-api.Rmd</code></a></small>
      <div class="d-none name"><code>research-api.Rmd</code></div>
    </div>

    
    
<p>TikTok’s <a href="https://developers.tiktok.com/products/research-api/" class="external-link">Research
API</a>, which was made available to researchers in the US and Europe in
2023, offers three endpoints, which are wrapped in three
<code>traktok</code> functions:</p>
<ol style="list-style-type: decimal">
<li>You can <a href="https://developers.tiktok.com/doc/research-api-specs-query-videos" class="external-link">search
videos</a> with <code>tt_search_api</code> or
<code>tt_search</code>
</li>
<li>You can <a href="https://developers.tiktok.com/doc/research-api-specs-query-user-info" class="external-link">get
basic user information</a> with <code>tt_user_info_api</code> or
<code>tt_user_info</code>
</li>
<li>You can <a href="https://developers.tiktok.com/doc/research-api-specs-query-video-comments" class="external-link">obtain
all comments of a video</a> with <code>tt_comments_api</code> or
<code>tt_comments</code>
</li>
</ol>
<div class="section level2">
<h2 id="authentication">Authentication<a class="anchor" aria-label="anchor" href="#authentication"></a>
</h2>
<p>To get access to the Research API, you need to:</p>
<ol style="list-style-type: decimal">
<li>
<a href="https://developers.tiktok.com/products/research-api" class="external-link">be
eligible</a>;</li>
<li>
<a href="https://developers.tiktok.com/signup" class="external-link">create a developer
account</a>;</li>
<li>and then apply for access to the research API: <a href="https://developers.tiktok.com/application/research-api" class="external-link uri">https://developers.tiktok.com/application/research-api</a>
</li>
</ol>
<p>Once are approved and have your client key and client secret, you can
authenticate with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JBGruber/traktok" class="external-link">traktok</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/auth_research.html">auth_research</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>It is recommended that you run this function only once without
arguments, so that your key and secret can be entered through the pop up
mask and do not remain unencrypted in your R history or a script. The
function then runs through authentication for you and saves the
resulting token encrypted on your hard drive. Just run it again in case
your credentials change.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="search-videos">Search Videos<a class="anchor" aria-label="anchor" href="#search-videos"></a>
</h3>
<p>TikTok uses a fine-grained, yet complicated <a href="https://developers.tiktok.com/doc/research-api-specs-query-videos#query" class="external-link">query
syntax</a>. For convenience, I wrapped this in internally, so you can
search with a key phrase directly:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tt_query_videos</span>(<span class="st">"#rstats"</span>, <span class="at">max_pages =</span> 2L)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>ℹ Making initial request[K</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>✔ Making initial request [90ms][K</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>ℹ Parsing data[K</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>✔ Parsing data [12ms][K</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── search id: NA ───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 × 11</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 11 variables: video_id &lt;lgl&gt;, author_name &lt;chr&gt;, view_count &lt;int&gt;,</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   comment_count &lt;int&gt;, region_code &lt;chr&gt;, create_time &lt;dttm&gt;,</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   effect_ids &lt;list&gt;, music_id &lt;chr&gt;, video_description &lt;chr&gt;,</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   hashtag_names &lt;list&gt;, voice_to_text &lt;chr&gt;</span></span></code></pre></div>
<p>This will match your keyword or phrase against keywords and hashtags
and return up to 200 results (each pages has 100 results and 2 pages are
requested) from today and yesterday. Every whitespace is treated as an
AND operator. To extend the data range, you can set a start and end
(which can be a maximum of 30 days apart, but there is no limit how far
you can go back):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tt_query_videos</span>(<span class="st">"#rstats"</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">max_pages =</span> 2L,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">start_date =</span> <span class="fu">as.Date</span>(<span class="st">"2023-11-01"</span>),</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_date =</span> <span class="fu">as.Date</span>(<span class="st">"2023-11-29"</span>))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>ℹ Making initial request[K</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>✔ Making initial request [469ms][K</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>ℹ Parsing data[K</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>✔ Parsing data [13ms][K</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── search id: 7306753928492848170 ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 18 × 11</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    video_id author_name view_count comment_count region_code create_time        </span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;            &lt;int&gt;         &lt;int&gt; &lt;chr&gt;       &lt;dttm&gt;             </span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 7305014… picanumeros         11             1 ES          2023-11-24 13:07:11</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 7304068… casaresfel…        603             0 AR          2023-11-21 23:56:02</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 7302970… smooth.lea…       4786             7 AU          2023-11-19 00:56:09</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 7302470… statistics…         44             1 DE          2023-11-17 16:34:44</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 7300977… statistics…       1397             0 DE          2023-11-13 16:01:47</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 7300931… rigochando        1494             5 MX          2023-11-13 13:02:59</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 7300922… elartedeld…         86             0 ES          2023-11-13 12:27:30</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 7299987… statistics…         81             1 DE          2023-11-10 23:58:21</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 7299657… rigochando         795             5 MX          2023-11-10 02:39:21</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 7299342… rigochando         375             1 MX          2023-11-09 06:18:41</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 11 7298966… rigochando        1183             2 MX          2023-11-08 05:58:35</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 12 7296911… biofreelan…       2537             5 MX          2023-11-02 17:03:20</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 13 7296911… biofreelan…       1363             0 MX          2023-11-02 17:03:20</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 14 7296911… biofreelan…        680             1 MX          2023-11-02 17:03:20</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 15 7296688… mrpecners           60             2 US          2023-11-02 02:39:29</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 16 7296518… l_a_kelly           10             5 GB          2023-11-01 15:38:54</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 17 7296498… mrpecners           19             0 US          2023-11-01 14:21:30</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 18 7296288… casaresfel…        266             0 AR          2023-11-01 00:47:12</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 5 more variables: effect_ids &lt;list&gt;, music_id &lt;chr&gt;,</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   video_description &lt;chr&gt;, hashtag_names &lt;list&gt;, voice_to_text &lt;chr&gt;</span></span></code></pre></div>
<p>As said, the query syntax that TikTok uses is a little complicated,
as you can use AND, OR and NOT boolean operators on a number of fields
(<code>"create_date"</code>, <code>"username"</code>,
<code>"region_code"</code>, <code>"video_id"</code>,
<code>"hashtag_name"</code>, <code>"keyword"</code>,
<code>"music_id"</code>, <code>"effect_id"</code>, and
<code>"video_length"</code>):</p>
<table class="table">
<thead><tr class="header">
<th>Operator</th>
<th>Results are returned if…</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>AND</td>
<td>…all specified conditions are met</td>
</tr>
<tr class="even">
<td>OR</td>
<td>…any of the specified conditions are met</td>
</tr>
<tr class="odd">
<td>NOT</td>
<td>…the not conditions are not met</td>
</tr>
</tbody>
</table>
<p>To make this easier to use, <code>traktok</code> uses a tidyverse
style approach to building queries. For example, to get to the same
query that matches #rstats against keywords and hashtags, you need to
build the query like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/query.html">query</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span>                                <span class="co"># start by using query()</span></span>
<span>  <span class="fu"><a href="../reference/query.html">query_or</a></span><span class="op">(</span>field_name <span class="op">=</span> <span class="st">"hashtag_name"</span>,   <span class="co"># add an OR condition on the hashtag field</span></span>
<span>           operation <span class="op">=</span> <span class="st">"IN"</span>,              <span class="co"># the value should IN the list of hashtags</span></span>
<span>           field_values <span class="op">=</span> <span class="st">"rstats"</span><span class="op">)</span> <span class="op">|&gt;</span>    <span class="co"># the hashtag field does not accept the #-symbol</span></span>
<span>  <span class="fu"><a href="../reference/query.html">query_or</a></span><span class="op">(</span>field_name <span class="op">=</span> <span class="st">"keyword"</span>,        <span class="co"># add another OR condition</span></span>
<span>           operation <span class="op">=</span> <span class="st">"IN"</span>,</span>
<span>           field_values <span class="op">=</span> <span class="st">"#rstats"</span><span class="op">)</span></span>
<span><span class="co">#&gt; S3&lt;traktok_query&gt;</span></span>
<span><span class="co">#&gt; └─or: &lt;list&gt;</span></span>
<span><span class="co">#&gt;   ├─&lt;list&gt;</span></span>
<span><span class="co">#&gt;   │ ├─field_name: "hashtag_name"</span></span>
<span><span class="co">#&gt;   │ ├─operation: "IN"</span></span>
<span><span class="co">#&gt;   │ └─field_values: &lt;list&gt;</span></span>
<span><span class="co">#&gt;   │   └─"rstats"</span></span>
<span><span class="co">#&gt;   └─&lt;list&gt;</span></span>
<span><span class="co">#&gt;     ├─field_name: "keyword"</span></span>
<span><span class="co">#&gt;     ├─operation: "IN"</span></span>
<span><span class="co">#&gt;     └─field_values: &lt;list&gt;</span></span>
<span><span class="co">#&gt;       └─"#rstats"</span></span></code></pre></div>
<p>If #rstats is found in either the hashtag or keywords of a video,
that video is then returned. Besides checking for <code>EQ</code>ual,
you can also use one of the other operations:</p>
<table class="table">
<thead><tr class="header">
<th>Operation</th>
<th>Results are returned if field_values are…</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>EQ</td>
<td>equal to the value in the field</td>
</tr>
<tr class="even">
<td>IN</td>
<td>equal to a value in the field</td>
</tr>
<tr class="odd">
<td>GT</td>
<td>greater than the value in the field</td>
</tr>
<tr class="even">
<td>GTE</td>
<td>greater than or equal to the value in the field</td>
</tr>
<tr class="odd">
<td>LT</td>
<td>lower than the value in the field</td>
</tr>
<tr class="even">
<td>LTE</td>
<td>lower than or equal to the value in the field</td>
</tr>
</tbody>
</table>
<p>This makes building queries relatively complex, but allows for
fine-grained searches in the TikTok data:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>search_df <span class="ot">&lt;-</span> <span class="fu">query</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">query_and</span>(<span class="at">field_name =</span> <span class="st">"region_code"</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">operation =</span> <span class="st">"IN"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">field_values =</span> <span class="fu">c</span>(<span class="st">"JP"</span>, <span class="st">"US"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">query_or</span>(<span class="at">field_name =</span> <span class="st">"hashtag_name"</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">operation =</span> <span class="st">"EQ"</span>, <span class="co"># rstats is the only hashtag</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">field_values =</span> <span class="st">"rstats"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">query_or</span>(<span class="at">field_name =</span> <span class="st">"keyword"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">operation =</span> <span class="st">"IN"</span>, <span class="co"># rstats is one of the keywords</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">field_values =</span> <span class="st">"rstats"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">query_not</span>(<span class="at">operation =</span> <span class="st">"EQ"</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">field_name =</span> <span class="st">"video_length"</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>            <span class="at">field_values =</span> <span class="st">"SHORT"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tt_search_api</span>(<span class="at">start_date =</span> <span class="fu">as.Date</span>(<span class="st">"2023-11-01"</span>),</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">end_date =</span> <span class="fu">as.Date</span>(<span class="st">"2023-11-29"</span>))</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>ℹ Making initial request[K</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>✔ Making initial request [462ms][K</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>ℹ Parsing data[K</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>✔ Parsing data [12ms][K</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>search_df</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── search id: 7306753928492864554 ──────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 11</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   video_id  author_name view_count comment_count region_code create_time        </span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt;            &lt;int&gt;         &lt;int&gt; &lt;chr&gt;       &lt;dttm&gt;             </span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 72966888… mrpecners           60             2 US          2023-11-02 02:39:29</span></span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 72964986… mrpecners           19             0 US          2023-11-01 14:21:30</span></span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 5 more variables: effect_ids &lt;list&gt;, music_id &lt;chr&gt;,</span></span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; #   video_description &lt;chr&gt;, hashtag_names &lt;list&gt;, voice_to_text &lt;chr&gt;</span></span></code></pre></div>
<p>This will return videos posted in the US or Japan, that have rstats
as the only hashtag or as one of the keywords and have a length of
<code>"MID"</code>, <code>"LONG"</code>, or <code>"EXTRA_LONG"</code>.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt; See &lt;a href="https://developers.tiktok.com/doc/research-api-specs-query-videos#condition_fields" class="external-link uri"&gt;https://developers.tiktok.com/doc/research-api-specs-query-videos#condition_fields&lt;/a&gt;
for possible values of each field.&lt;/p&gt;'><sup>1</sup></a></p>
</div>
<div class="section level3">
<h3 id="get-basic-user-information">Get Basic User Information<a class="anchor" aria-label="anchor" href="#get-basic-user-information"></a>
</h3>
<p>There is not really much to getting basic user info, but this is how
you can do it:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tt_user_info_api.html">tt_user_info_api</a></span><span class="op">(</span>username <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tiktok"</span>, <span class="st">"https://www.tiktok.com/@statisticsglobe"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 8</span></span>
<span><span class="co">#&gt;   video_count avatar_url             bio_description display_name follower_count</span></span>
<span><span class="co">#&gt;         &lt;int&gt; &lt;chr&gt;                  &lt;chr&gt;           &lt;chr&gt;                 &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1        1375 https://p19-sign.tikt… "TikTok In The… TikTok             76371372</span></span>
<span><span class="co">#&gt; 2          18 https://p16-sign-usea… "Hi, I'm Joach… Statistics …            179</span></span>
<span><span class="co">#&gt; # ℹ 3 more variables: following_count &lt;int&gt;, is_verified &lt;lgl&gt;,</span></span>
<span><span class="co">#&gt; #   likes_count &lt;int&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="obtain-all-comments-of-a-video">Obtain all Comments of a Video<a class="anchor" aria-label="anchor" href="#obtain-all-comments-of-a-video"></a>
</h3>
<p>There is again, not much to talk about when it comes to the comments
API. You need to supply a video ID, which you either have already:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tt_comments_api</span>(<span class="at">video_id =</span> <span class="st">"7302470379501604128"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>ℹ Making initial request[K</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>✔ Making initial request [917ms][K</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>ℹ Parsing data[K</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>✔ Parsing data [8ms][K</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── search id:  ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 7</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   like_count parent_comment_id   reply_count text     video_id create_time id   </span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;        &lt;int&gt; &lt;chr&gt;                     &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1          0 7302470379501604128           0 and why… 7302470…  1700243424 7302…</span></span></code></pre></div>
<p>Or you got it from a search:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tt_comments_api</span>(<span class="at">video_id =</span> search_df<span class="sc">$</span>video_id[<span class="dv">1</span>])</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>ℹ Making initial request[K</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>✔ Making initial request [4s][K</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>ℹ Parsing data[K</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>✔ Parsing data [8ms][K</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── search id:  ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 7</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   text       video_id create_time id    like_count parent_comment_id reply_count</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;chr&gt;                   &lt;int&gt;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 So cool!!! 7296688…  1698893206 7296…          1 7296688856609475…           1</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Thanks!    7296688…  1698893251 7296…          0 7296690681388204…           0</span></span></code></pre></div>
<p>Or you let the function extract if from a URL to a video:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tt_comments_api</span>(<span class="at">video_id =</span> <span class="st">"https://www.tiktok.com/@nicksinghtech/video/7195762648716152107?q=%23rstats"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>ℹ Making initial request[K</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>✔ Making initial request [<span class="fl">4.4</span>s][K</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>ℹ Parsing data[K</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>✔ Parsing data [12ms][K</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; ── search id:  ─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 96 × 7</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    parent_comment_id   reply_count text    video_id create_time id    like_count</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;chr&gt;                     &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;          &lt;int&gt; &lt;chr&gt;      &lt;int&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1 7195762648716152107          10 You go… 7195762…  1675394834 7195…        314</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2 7195762648716152107          11 R is t… 7195762…  1675457114 7196…        232</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3 7195762648716152107           7 Ppl wh… 7195762…  1675458796 7196…        177</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4 7195765969909252906           0 Fair b… 7195762…  1675395061 7195…        166</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5 7195762648716152107           2 babe R… 7195762…  1675624739 7196…         71</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6 7195762648716152107          12 Excel … 7195762…  1675465779 7196…         71</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7 7195762648716152107           3 NOT TH… 7195762…  1675494738 7196…         27</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8 7196040663480222506           0 I won'… 7195762…  1675691471 7197…         17</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9 7195762648716152107           2 No lov… 7195762…  1675656122 7196…         16</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10 7195762648716152107           2 I use … 7195762…  1675440749 7195…         16</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # ℹ 86 more rows</span></span></code></pre></div>
<p>And that is essentially it. Note, that if you find the functionality
of the Research API lacking, there is nothing that keeps you from using
the unofficial API functions.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Johannes B. Gruber.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
